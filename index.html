<!DOCTYPE html>
<html>
<head>
  <title>Remote Pi Camera</title>
  <style>
    body { font-family: sans-serif; text-align: center; margin: 50px; }
    img { max-width: 95%; border: 1px solid #ccc; margin-top: 20px; }
  </style>
</head>
<body>
  <h1>ðŸ“¸ Remote Pi Camera</h1>

  <button onclick="capture()">Capture Image</button>

  <div>
    <img id="preview" src="https://e9fcfbf31b8b.ngrok-free.app/latest.jpg" alt="Captured Image" />
  </div>

  <script>
    function capture() {
      fetch("https://e9fcfbf31b8b.ngrok-free.app/capture", { method: "POST" })
        .then(response => {
          if (!response.ok) throw new Error("Capture failed");
          return response.json();
        })
        .then(() => {
          const img = document.getElementById("preview");
          img.src = "https://e9fcfbf31b8b.ngrok-free.app/latest.jpg?t=" + new Date().getTime(); // Cache bust
        })
        .catch(err => {
          console.error(err);
          alert("Error capturing image: " + err.message);
        });
    }
  </script>
</body>
</html>
